<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" type="text/css" href="../../_css/styles.css">

  <title>Express</title>
</head>

<body>


  <nav class="navbar">
    <a href="../../index.html">Back to homepage</a>
    <a class="nav-page nav-active">Express</a>
  </nav>


  <h1>Express</h1>

  <div class="text-section">
    <p>Express is a minimal node.js framework.</p>
    <p>Many features included which allows you to write apps much faster.</p>
    <img src="../../_img/express.png" width="450px">
  </div>





  <h2>Postman</h2>
  <div class="text-section">
    <p>Postman allows you to develop and test APIs.</p>
    <p>Download the app to your computer.</p>
    <ul>
      <li><a href="https://www.postman.com/downloads/">Postman</a></li>
    </ul>
  </div>





  <h2>Install Express and add to script</h2>
  <section class="code-section-container">
    <div class="code-text-section">
      <p>Install Express</p>
    </div>

    <div class="code-block-section-w60">
      <pre class="example"><span class="code-nodejs">npm install express</span></pre>
    </div>
  </section>

  <section class="code-section-container">
    <div class="code-text-section">
      <p>Add to script.</p>
    </div>
    <div class="code-block-section-w60">
      <pre class="example"><span class="code-nodejs">const express = require('express');</span></pre>
    </div>
  </section>




  <h2>Create app variable to store Express</h2>
  <section class="code-section-container">
    <div class="code-text-section">
      <p>Store the Express module in a variable named <span class="code">app</span>.</p>
    </div>
    <div class="code-block-section-w60">
      <pre class="example"><span class="code-nodejs">const app = express();</span></pre>
    </div>
  </section>




  <h2>Use 'listen' method to start a server</h2>
  <section class="code-section-container">
    <div class="code-text-section">
      <p>Use the <span class="code">listen</span> method to start a server.</p>
      <p>This method takes in the args:</p>
      <ul>
        <li>port#</li>
        <li>a callback function</li>
      </ul>
    </div>
    <div class="code-block-section-w60">
      <pre class="example"><span class="code-nodejs">const express = require('express');
const app = express();

const port = 3000;

<span class="code-comment">// pass in port and callback function </span>
<span class="code-highlight">app.listen(port, () => { </span>
  console.log('App running');
});</span></pre>
    </div>
  </section>



  <h2>Create a route</h2>
  <section class="code-section-container">
    <div class="code-text-section">
      <p>Create a route for the default home URL.</p>
      <p>Type <span class="code">app</span> followed by the HTTP method to respond to. In this case, <span
          class="code">get()</span>.</p>
      <p><span class="code">get()</span> takes the args:</p>
      <ul>
        <li>URL</li>
        <li>callback function</li>
      </ul>
      <p>Use the response Object to send back data.</p>
      <p>You can set the status using the <span class="code">status()</span> method and data to send using the <span
          class="code">send()</span> method.</p>
    </div>
    <div class="code-block-section-w60">
      <pre class="example"><span class="code-nodejs">const express = require('express');
const app = express();

<span class="code-comment">// Routing </span>
<span class="code-highlight">app.get('/', (req, res) =&gt; {
  res.status(200).send('Hello from the server');
});</span>

const port = 3000;

app.listen(port, () =&gt; {
  console.log('App running');
});        
</span></pre>
    </div>
  </section>

  <h3>View results in Postman</h3>
  <div class="text-section">
    <p>Open Postman and create a <span class="code">GET</span> request to <span
        class="text-object">127.0.0.1:3000/</span> to view the result.</p>
  </div>







  <h2>Send JSON back to client</h2>

  <section class="code-section-container">
    <div class="code-text-section">
      <p>Instead of using the <span class="code">send()</span> method, use <span class="code">json()</span> and send
        back an Object.</p>
    </div>
    <div class="code-block-section-w60">
      <pre class="example"><span class="code-nodejs">const express = require('express');
const app = express();

<span class="code-comment">// Routing </span>
app.get('/', (req, res) =&gt; {
  res.status(200).<span class="code-highlight">json({ message: 'Hello from the server', app: 'Natours' });</span>
});

const port = 3000;

app.listen(port, () =&gt; {
  console.log('App running');
});        
</span></pre>
    </div>
  </section>






  <h1>The Request-Response cycle</h1>

  <div class="text-section">
    <p>Express app receives a request when someone hits a server for which it will then create a request and response
      object.</p>
    <p>That data will then be used and processed in order to generate and send back a meaningful response.</p>
    <p>In order to process that data, in Express we use something called middleware, which can manipulate the request or
      the response object.</p>
    <p>It's called middleware remember because it's a function that is executed between, so in the middle of receiving
      the request and sending the response.</p>
    <p>All the middleware together that we use in our app, is called the middleware Stack.</p>
    <p>It's very important to keep in mind that the order of middleware in the stack, is actually defined by the order
      they are defined in the code. So a middleware that appears first in the code, is executed before one that appears
      later.</p>
    <img src="../../_img/middleware.png" width="750px">
  </div>

  <h2>Process</h2>
  <div class="text-section">
    <p>The <span class="code">next()</span> function is available for all middleware functions.</p>
    <p>It's called at the end of each middleware function on the exact same request and response object.</p>
    <p>The last middleware function is usually a route handler without a <span class="code">next()</span> function.</p>
    <p>At that point, the response data is sent back to the client.</p>
    <p>This completes the Request-Response cycle.</p>
  </div>



  <h2>Express Middleware</h2>
  <div class="text-section">
    <ul>
      <li><a href="https://expressjs.com/en/resources/middleware.html" target="_blank">Express Middleware options</a>
      </li>
    </ul>

  </div>

























</body>

</html>